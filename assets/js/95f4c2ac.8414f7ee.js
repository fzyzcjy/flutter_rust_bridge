"use strict";(self.webpackChunkflutter_rust_bridge=self.webpackChunkflutter_rust_bridge||[]).push([[2404],{15680:(e,t,r)=>{r.d(t,{xA:()=>l,yg:()=>d});var a=r(96540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=a.createContext({}),p=function(e){var t=a.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):u(u({},t),e)),r},l=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,s=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),y=p(r),d=n,m=y["".concat(s,".").concat(d)]||y[d]||c[d]||i;return r?a.createElement(m,u(u({ref:t},l),{},{components:r})):a.createElement(m,u({ref:t},l))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,u=new Array(i);u[0]=y;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:n,u[1]=o;for(var p=2;p<i;p++)u[p]=r[p];return a.createElement.apply(null,u)}return a.createElement.apply(null,r)}y.displayName="MDXCreateElement"},69366:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>u,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=r(58168),n=(r(96540),r(15680));const i={},u="Automatic arbitrary Dart type",o={unversionedId:"guides/types/arbitrary/dart-opaque",id:"guides/types/arbitrary/dart-opaque",title:"Automatic arbitrary Dart type",description:"This feature is just like the mirror of the automatic arbitrary Rust type.",source:"@site/docs/guides/types/arbitrary/dart-opaque.md",sourceDirName:"guides/types/arbitrary",slug:"/guides/types/arbitrary/dart-opaque",permalink:"/flutter_rust_bridge/guides/types/arbitrary/dart-opaque",draft:!1,editUrl:"https://github.com/fzyzcjy/flutter_rust_bridge/tree/master/website/docs/guides/types/arbitrary/dart-opaque.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"RustAutoOpaque struct",permalink:"/flutter_rust_bridge/guides/types/arbitrary/rust-auto-opaque/struct"},next:{title:"Manual arbitrary Rust type",permalink:"/flutter_rust_bridge/guides/types/arbitrary/rust-opaque"}},s={},p=[{value:"Example",id:"example",level:2},{value:"Implementation details",id:"implementation-details",level:2}],l={toc:p};function c(e){let{components:t,...r}=e;return(0,n.yg)("wrapper",(0,a.A)({},l,r,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"automatic-arbitrary-dart-type"},"Automatic arbitrary Dart type"),(0,n.yg)("p",null,"This feature is just like the mirror of the ",(0,n.yg)("a",{parentName:"p",href:"rust-auto-opaque"},"automatic arbitrary Rust type"),'.\nTherefore, just use the mental model and knowledge learnt in the previous section,\nand swap all "Rust" with "Dart", and we only briefly explain it here.'),(0,n.yg)("p",null,"In addition to directly use it,\nthis feature is also useful when in combination with ",(0,n.yg)("a",{parentName:"p",href:"../../direction/rust-call-dart"},"Rust calls Dart"),"."),(0,n.yg)("h2",{id:"example"},"Example"),(0,n.yg)("p",null,"Here, we pass a Dart closure ",(0,n.yg)("inlineCode",{parentName:"p"},"() => '42'")," into the Rust world, and get it back to Dart, and use it:"),(0,n.yg)("p",null,"Rust:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-rust"},"pub fn put_dart_opaque(a: DartOpaque) { ... }\npub fn get_dart_opaque() -> DartOpaque { ... }\n")),(0,n.yg)("p",null,"And use it in Dart:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-dart"},"await putDartOpaque(() => '42');\nvar answer = (await getDartOpaque()) as String Function(); // it is the `() => '42'` closure\nprint(answer()); // print '42'\n")),(0,n.yg)("h2",{id:"implementation-details"},"Implementation details"),(0,n.yg)("p",null,"As for how it is implemented as well as the design towards safety,\nplease refer to ",(0,n.yg)("a",{parentName:"p",href:"../../contributing/submodules/dart-opaque"},"this doc")))}c.isMDXComponent=!0}}]);