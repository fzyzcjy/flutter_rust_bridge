"use strict";(self.webpackChunkflutter_rust_bridge=self.webpackChunkflutter_rust_bridge||[]).push([[1361],{15680:(e,r,t)=>{t.d(r,{xA:()=>u,yg:()=>g});var n=t(96540);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=n.createContext({}),c=function(e){var r=n.useContext(s),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},u=function(e){var r=c(e.components);return n.createElement(s.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return n.createElement(n.Fragment,{},r)}},d=n.forwardRef((function(e,r){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(t),g=a,f=d["".concat(s,".").concat(g)]||d[g]||p[g]||i;return t?n.createElement(f,o(o({ref:r},u),{},{components:t})):n.createElement(f,o({ref:r},u))}));function g(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var s in r)hasOwnProperty.call(r,s)&&(l[s]=r[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=t[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}d.displayName="MDXCreateElement"},76382:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var n=t(58168),a=(t(96540),t(15680));const i={},o="Misc Tips",l={unversionedId:"guides/contributing/tip",id:"guides/contributing/tip",title:"Misc Tips",description:"AI Assistant Skills",source:"@site/docs/guides/contributing/tip.md",sourceDirName:"guides/contributing",slug:"/guides/contributing/tip",permalink:"/flutter_rust_bridge/guides/contributing/tip",draft:!1,editUrl:"https://github.com/fzyzcjy/flutter_rust_bridge/tree/master/website/docs/guides/contributing/tip.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Manual tests",permalink:"/flutter_rust_bridge/guides/contributing/submodules/manual-test"},next:{title:"Manual",permalink:"/flutter_rust_bridge/manual/"}},s={},c=[{value:"AI Assistant Skills",id:"ai-assistant-skills",level:2},{value:"Tips for development",id:"tips-for-development",level:2},{value:"Docker and devcontainer",id:"docker-and-devcontainer",level:3},{value:"The <code>./frb_internal</code>",id:"the-frb_internal",level:3},{value:"The <code>just codegen</code>",id:"the-just-codegen",level:3},{value:"Draw a flamegraph for performance",id:"draw-a-flamegraph-for-performance",level:2},{value:"Debug in Safari (or other browsers)",id:"debug-in-safari-or-other-browsers",level:2},{value:"Print missing stack traces",id:"print-missing-stack-traces",level:2}],u={toc:c};function p(e){let{components:r,...t}=e;return(0,a.yg)("wrapper",(0,n.A)({},u,t,{components:r,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"misc-tips"},"Misc Tips"),(0,a.yg)("h2",{id:"ai-assistant-skills"},"AI Assistant Skills"),(0,a.yg)("p",null,"For common development workflows, see the skills in ",(0,a.yg)("inlineCode",{parentName:"p"},".claude/skills/"),"."),(0,a.yg)("h2",{id:"tips-for-development"},"Tips for development"),(0,a.yg)("h3",{id:"docker-and-devcontainer"},"Docker and devcontainer"),(0,a.yg)("p",null,"Optionally, you can use Docker and/or devcontainer to quickly get a standardized development environment. The related code is in ",(0,a.yg)("inlineCode",{parentName:"p"},".devcontainer"),"."),(0,a.yg)("h3",{id:"the-frb_internal"},"The ",(0,a.yg)("inlineCode",{parentName:"h3"},"./frb_internal")),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"./frb_internal whatever-command")," (or ",(0,a.yg)("inlineCode",{parentName:"p"},"./frb_internal.bat"),") delegates to the ",(0,a.yg)("inlineCode",{parentName:"p"},"./tools/frb_internal")," dart package.\nIt contains all scripts to work on flutter_rust_bridge development.\nIt as a similar role as ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/casey/just/blob/master/justfile"},"justfile"),", makefile, etc.\nFor example, ",(0,a.yg)("inlineCode",{parentName:"p"},"./frb_internal precommit --mode fast")," (or ",(0,a.yg)("inlineCode",{parentName:"p"},"--mode slow"),") runs code generator, formatter, etc for you."),(0,a.yg)("h3",{id:"the-just-codegen"},"The ",(0,a.yg)("inlineCode",{parentName:"h3"},"just codegen")),(0,a.yg)("p",null,"To run the ",(0,a.yg)("inlineCode",{parentName:"p"},"flutter_rust_bridge_codegen"),", but using the local code (instead of a released version),\nplease replace it with ",(0,a.yg)("inlineCode",{parentName:"p"},"just codegen"),"."),(0,a.yg)("h2",{id:"draw-a-flamegraph-for-performance"},"Draw a flamegraph for performance"),(0,a.yg)("p",null,"If you are not working on improving performance, please ignore this subsection."),(0,a.yg)("p",null,"I have made some small scripts for me to get flamegraph on MacOS.\nThe scripts contain absolute paths, extra pieces for MacOS to work, etc.\nSo you can look at the source code and modify to suit your needs."),(0,a.yg)("p",null,"To execute it:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"./frb_internal bench-flamegraph-compile\n./frb_internal bench-flamegraph-run --filter 'VoidFunction.*FrbCstSse.*false' --loop-count 10000000\n")),(0,a.yg)("h2",{id:"debug-in-safari-or-other-browsers"},"Debug in Safari (or other browsers)"),(0,a.yg)("p",null,"Given ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/flutter/flutter/issues/55323"},"this Flutter issue"),",\nit seems that we cannot use things similar to ",(0,a.yg)("inlineCode",{parentName:"p"},"flutter run -d chrome")," for Safari.\nHere is a brief command to achieve similar results."),(0,a.yg)("p",null,"Note that we need ",(0,a.yg)("inlineCode",{parentName:"p"},"--profile")," to get stack traces."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-shell"},"(cd frb_example/flutter_via_create && just codegen build-web && flutter build web --profile)\n(cd frb_utils && dart run flutter_rust_bridge_utils serve-web --web-root ../frb_example/flutter_via_create/build/web)\n")),(0,a.yg)("h2",{id:"print-missing-stack-traces"},"Print missing stack traces"),(0,a.yg)("p",null,"This script quickly print out every uncaught exception with stack traces.\nFor example, when working on Safari, the stack traces are missing without this."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-dart"},"Future<void> main() async {\n  FlutterError.onError = (details) {\n    FlutterError.presentError(details);\n    print('FlutterError.onError $details');\n  };\n  PlatformDispatcher.instance.onError = (error, stack) {\n    print('PlatformDispatcher.instance.onError $error $stack');\n    return true;\n  };\n  await runZonedGuarded(\n    () async {\n      YOUR_ORIGINAL_CODE_HERE;\n    },\n    (error, stackTrace) => print('runZonedGuarded error $error $stackTrace'),\n  );\n}\n")))}p.isMDXComponent=!0}}]);